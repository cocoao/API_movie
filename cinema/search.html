<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CINEMA NOW.</title>

  <!-- jQuery link -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(function(){

      let searchValue = document.location.href.split("=")[1];
      let decodeValue = decodeURI(searchValue);
      console.log(decodeValue);
      $.ajax({
        type:"POST",
        url:"/cinema/data/api.php",
        data: {
          search_value:decodeValue,
        },
        success: function(data){
          let obj = JSON.parse(data);
          // console.log(obj);
          // console.log(obj.items);
          if(obj.items.length == 0){
            alert("일치하는 영화가 없습니다.");
            location.href = "/cinema/data/index.html";
          }

          let itemContents = [];
          $.each(obj.items, function(i,item){
            // console.log(item.title);
            let itemHTML = `<div class="movie_box">
                              <img src="${item.image}" alt="">
                              <h2>제목 | ${item.title}</h2>
                              <p>감독 | ${item.director}</p>
                              <p>배우 | ${item.actor}</p>
                              <p>개봉 | ${item.pubDate}</p>
                              <p>평점 | ${item.userRating}</p>
                            </div>`;
                            itemContents.push($(itemHTML).get(0));
          });
          $(".wrap").append(itemContents);
        },
      });
    });
  </script>
</head>
<body>
  <div class="wrap">
    <!-- <div class="movie_box">
      <img src="" alt="">
      <h2>제목 | </h2>
      <p>감독 | </p>
      <p>배우 | </p>
      <p>개봉 | </p>
      <p>평점 | </p>
    </div> -->
  </div>
</body>
</html>